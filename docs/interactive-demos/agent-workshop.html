<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agent Workshop - SafeAI Interactive Demos</title>
  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX transpiling -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Emotion for Material-UI -->
  <script src="https://unpkg.com/@emotion/react@11.11.3/dist/emotion-react.umd.min.js"></script>
  <script src="https://unpkg.com/@emotion/styled@11.11.0/dist/emotion-styled.umd.min.js"></script>
  <!-- Material-UI CDN -->
  <script src="https://unpkg.com/@mui/material@5.15.11/umd/material-ui.development.js" crossorigin></script>
  <!-- CodeMirror for code editing -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/material.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="../css/shared-demo.css" />
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #121212;
      color: #ffffff;
      font-family: 'Roboto', sans-serif;
    }
    .workshop-card {
      background: rgba(255, 255, 255, 0.05);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .CodeMirror {
      height: 300px;
      border-radius: 8px;
      margin: 16px 0;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { 
      Box, Typography, Button, Card, CardContent, 
      Grid, Divider, AppBar, Toolbar, Avatar, 
      Chip, Paper, IconButton, Tooltip, LinearProgress,
      TextField, Dialog, DialogTitle, DialogContent, DialogActions,
      List, ListItem, ListItemText, ListItemIcon, Container,
      CircularProgress, Alert, Stack, FormControl,
      useTheme, ThemeProvider, createTheme, CssBaseline
    } = MaterialUI;

    const darkTheme = createTheme({
      palette: {
        mode: 'dark',
        primary: {
          main: '#90caf9',
        },
        secondary: {
          main: '#f48fb1',
        },
        background: {
          default: '#121212',
          paper: '#1e1e1e',
        },
      },
    });

    function AgentWorkshop() {
      const [code, setCode] = React.useState(`// Example agent configuration
const agentConfig = {
  name: "MathSolver",
  capabilities: ["arithmetic", "algebra", "calculus"],
  safetyConstraints: {
    maxComplexity: "high",
    allowedOperations: ["addition", "subtraction", "multiplication", "division"]
  }
};

// Agent behavior definition
function solveMathProblem(problem) {
  // Implementation here
  return result;
}`);

      const [editor, setEditor] = React.useState(null);
      const editorRef = React.useRef(null);

      React.useEffect(() => {
        if (editorRef.current && !editor) {
          const newEditor = CodeMirror(editorRef.current, {
            value: code,
            mode: "javascript",
            theme: "monokai",
            lineNumbers: true,
            autoCloseBrackets: true,
            matchBrackets: true,
            indentUnit: 4,
            lineWrapping: true,
          });

          newEditor.on("change", (cm) => {
            setCode(cm.getValue());
          });

          setEditor(newEditor);
        }
      }, [editorRef.current]);

      const handleRunCode = () => {
        try {
          // In a real implementation, this would be sent to a backend service
          console.log("Running code:", code);
          alert("Code executed successfully!");
        } catch (error) {
          console.error("Error running code:", error);
          alert("Error executing code: " + error.message);
        }
      };

      return (
        <Box sx={{ p: 3 }}>
          <AppBar position="static" sx={{ backgroundColor: "rgba(0,0,0,0.5)", mb: 3 }}>
            <Toolbar>
              <IconButton edge="start" color="inherit" sx={{ mr: 2 }}>
                <span className="material-icons">code</span>
              </IconButton>
              <Typography variant="h6" sx={{ flexGrow: 1 }}>
                Agent Workshop
              </Typography>
              <Button 
                color="inherit" 
                href="index.html"
                startIcon={<span className="material-icons">arrow_back</span>}
              >
                Back to Demos
              </Button>
            </Toolbar>
          </AppBar>

          <Grid container spacing={3}>
            <Grid item xs={12} md={6}>
              <Typography variant="h5" gutterBottom>
                Agent Configuration
              </Typography>
              <Card className="workshop-card">
                <CardContent>
                  <div ref={editorRef} />
                  <Box sx={{ mt: 2, display: 'flex', gap: 2 }}>
                    <Button
                      variant="contained"
                      onClick={handleRunCode}
                      startIcon={<span className="material-icons">play_arrow</span>}
                    >
                      Run Code
                    </Button>
                    <Button
                      variant="outlined"
                      onClick={() => editor?.setValue(code)}
                      startIcon={<span className="material-icons">refresh</span>}
                    >
                      Reset
                    </Button>
                  </Box>
                </CardContent>
              </Card>
            </Grid>

            <Grid item xs={12} md={6}>
              <Typography variant="h5" gutterBottom>
                Agent Preview
              </Typography>
              <Card className="workshop-card">
                <CardContent>
                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>
                    <Avatar sx={{ bgcolor: 'primary.main', mr: 2 }}>
                      <span className="material-icons">smart_toy</span>
                    </Avatar>
                    <Typography variant="h6">MathSolver Agent</Typography>
                  </Box>
                  <List>
                    <ListItem>
                      <ListItemIcon>
                        <span className="material-icons">extension</span>
                      </ListItemIcon>
                      <ListItemText 
                        primary="Capabilities" 
                        secondary="arithmetic, algebra, calculus"
                      />
                    </ListItem>
                    <ListItem>
                      <ListItemIcon>
                        <span className="material-icons">security</span>
                      </ListItemIcon>
                      <ListItemText 
                        primary="Safety Constraints" 
                        secondary="maxComplexity: high, allowedOperations: basic arithmetic"
                      />
                    </ListItem>
                  </List>
                </CardContent>
              </Card>
            </Grid>
          </Grid>
        </Box>
      );
    }

    // Render the app with ThemeProvider
    ReactDOM.render(
      <ThemeProvider theme={darkTheme}>
        <CssBaseline />
        <AgentWorkshop />
      </ThemeProvider>,
      document.getElementById('root')
    );
  </script>
</body>
</html> 