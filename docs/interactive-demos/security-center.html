<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Security Center - SafeAI Interactive Demos</title>
  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX transpiling -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Material-UI CDN -->
  <script src="https://unpkg.com/@mui/material@5.15.11/umd/material-ui.development.js" crossorigin></script>
  <!-- Chart.js for visualizations -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="../css/shared-demo.css" />
  <style>
    .security-container {
      display: grid;
      grid-template-columns: 250px 1fr;
      gap: 20px;
      height: calc(100vh - 64px);
    }
    
    .sidebar {
      background-color: rgba(255, 255, 255, 0.05);
      border-right: 1px solid rgba(255, 255, 255, 0.1);
      padding: 20px;
      overflow-y: auto;
    }
    
    .main-content {
      padding: 20px;
      overflow-y: auto;
    }
    
    .metric-card {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      padding: 16px;
      margin-bottom: 16px;
    }
    
    .metric-value {
      font-size: 24px;
      font-weight: 500;
      margin: 8px 0;
    }
    
    .metric-label {
      color: rgba(255, 255, 255, 0.7);
      font-size: 14px;
    }
    
    .chart-container {
      height: 300px;
      margin: 20px 0;
    }
    
    .alert-list {
      max-height: 400px;
      overflow-y: auto;
    }
    
    .alert-item {
      padding: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .alert-item:last-child {
      border-bottom: none;
    }
    
    .alert-critical {
      border-left: 4px solid #f44336;
    }
    
    .alert-warning {
      border-left: 4px solid #ff9800;
    }
    
    .alert-info {
      border-left: 4px solid #2196f3;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { 
      Box, Typography, Container, Card, CardContent, Grid, AppBar, Toolbar,
      IconButton, Icon, Button, TextField, Select, MenuItem, FormControl,
      InputLabel, Chip, Stack, Divider, Alert, List, ListItem, ListItemText,
      ListItemIcon, Switch, FormControlLabel, Paper
    } = MaterialUI;

    // Sample security metrics
    const securityMetrics = {
      activeAgents: 42,
      securityScore: 92,
      threatsDetected: 3,
      policyViolations: 1,
      lastUpdate: new Date().toISOString()
    };

    // Sample security alerts
    const securityAlerts = [
      {
        id: 1,
        type: 'critical',
        title: 'Unauthorized Access Attempt',
        description: 'Multiple failed login attempts detected from IP 192.168.1.100',
        timestamp: '2024-03-22T14:30:00Z',
        status: 'active'
      },
      {
        id: 2,
        type: 'warning',
        title: 'Policy Violation',
        description: 'Agent "MathSolver" attempted to access restricted knowledge graph',
        timestamp: '2024-03-22T14:25:00Z',
        status: 'resolved'
      },
      {
        id: 3,
        type: 'info',
        title: 'System Update',
        description: 'Security policies updated to version 2.1.0',
        timestamp: '2024-03-22T14:20:00Z',
        status: 'completed'
      }
    ];

    // Sample security policies
    const securityPolicies = [
      {
        id: 1,
        name: 'Access Control',
        description: 'Restrict agent access to sensitive knowledge graphs',
        enabled: true
      },
      {
        id: 2,
        name: 'Rate Limiting',
        description: 'Limit API requests per agent',
        enabled: true
      },
      {
        id: 3,
        name: 'Audit Logging',
        description: 'Log all agent actions and decisions',
        enabled: true
      },
      {
        id: 4,
        name: 'Content Filtering',
        description: 'Filter potentially harmful content',
        enabled: false
      }
    ];

    function SecurityCenter() {
      const [selectedPolicy, setSelectedPolicy] = React.useState(null);
      const [chartData, setChartData] = React.useState(null);
      const chartRef = React.useRef(null);

      React.useEffect(() => {
        // Initialize chart
        if (chartRef.current) {
          const ctx = chartRef.current.getContext('2d');
          const chart = new Chart(ctx, {
            type: 'line',
            data: {
              labels: ['1h', '2h', '3h', '4h', '5h', '6h'],
              datasets: [{
                label: 'Security Score',
                data: [85, 88, 90, 92, 91, 92],
                borderColor: '#2196f3',
                tension: 0.4
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  display: false
                }
              },
              scales: {
                y: {
                  beginAtZero: true,
                  max: 100,
                  grid: {
                    color: 'rgba(255, 255, 255, 0.1)'
                  },
                  ticks: {
                    color: 'rgba(255, 255, 255, 0.7)'
                  }
                },
                x: {
                  grid: {
                    color: 'rgba(255, 255, 255, 0.1)'
                  },
                  ticks: {
                    color: 'rgba(255, 255, 255, 0.7)'
                  }
                }
              }
            }
          });
          setChartData(chart);
        }
      }, []);

      const handlePolicyToggle = (policyId) => {
        // Simulate policy toggle
        console.log(`Toggling policy ${policyId}`);
      };

      const getAlertColor = (type) => {
        switch (type) {
          case 'critical': return '#f44336';
          case 'warning': return '#ff9800';
          case 'info': return '#2196f3';
          default: return '#757575';
        }
      };

      return (
        <Box>
          <AppBar position="static" sx={{ backgroundColor: "rgba(0,0,0,0.5)" }}>
            <Toolbar>
              <IconButton
                size="large"
                edge="start"
                color="inherit"
                aria-label="menu"
                sx={{ mr: 2 }}
              >
                <Icon>security</Icon>
              </IconButton>
              <Typography variant="h6" component="div" sx={{ flexGrow: 1 }}>
                Security Center
              </Typography>
              <Button color="inherit" href="index.html">
                Back to Demos
              </Button>
            </Toolbar>
          </AppBar>
          
          <Container maxWidth={false} sx={{ mt: 4 }}>
            <Grid container spacing={3}>
              <Grid item xs={12} md={3}>
                <Card className="sidebar">
                  <CardContent>
                    <Typography variant="h6" gutterBottom>
                      Security Metrics
                    </Typography>
                    <Stack spacing={2}>
                      <div className="metric-card">
                        <Typography className="metric-label">Active Agents</Typography>
                        <Typography className="metric-value">{securityMetrics.activeAgents}</Typography>
                      </div>
                      <div className="metric-card">
                        <Typography className="metric-label">Security Score</Typography>
                        <Typography className="metric-value">{securityMetrics.securityScore}%</Typography>
                      </div>
                      <div className="metric-card">
                        <Typography className="metric-label">Threats Detected</Typography>
                        <Typography className="metric-value">{securityMetrics.threatsDetected}</Typography>
                      </div>
                      <div className="metric-card">
                        <Typography className="metric-label">Policy Violations</Typography>
                        <Typography className="metric-value">{securityMetrics.policyViolations}</Typography>
                      </div>
                    </Stack>
                    
                    <Divider sx={{ my: 3 }} />
                    
                    <Typography variant="h6" gutterBottom>
                      Security Policies
                    </Typography>
                    <Stack spacing={2}>
                      {securityPolicies.map((policy) => (
                        <Card key={policy.id} sx={{ bgcolor: 'rgba(255,255,255,0.05)' }}>
                          <CardContent>
                            <FormControlLabel
                              control={
                                <Switch
                                  checked={policy.enabled}
                                  onChange={() => handlePolicyToggle(policy.id)}
                                />
                              }
                              label={
                                <Box>
                                  <Typography variant="subtitle2">{policy.name}</Typography>
                                  <Typography variant="caption" color="text.secondary">
                                    {policy.description}
                                  </Typography>
                                </Box>
                              }
                            />
                          </CardContent>
                        </Card>
                      ))}
                    </Stack>
                  </CardContent>
                </Card>
              </Grid>
              
              <Grid item xs={12} md={9}>
                <Card>
                  <CardContent>
                    <Typography variant="h6" gutterBottom>
                      Security Score Trend
                    </Typography>
                    <div className="chart-container">
                      <canvas ref={chartRef} />
                    </div>
                    
                    <Divider sx={{ my: 3 }} />
                    
                    <Typography variant="h6" gutterBottom>
                      Recent Alerts
                    </Typography>
                    <div className="alert-list">
                      {securityAlerts.map((alert) => (
                        <Paper
                          key={alert.id}
                          className={`alert-item alert-${alert.type}`}
                          sx={{ mb: 1 }}
                        >
                          <ListItem>
                            <ListItemIcon>
                              <Icon sx={{ color: getAlertColor(alert.type) }}>
                                {alert.type === 'critical' ? 'error' :
                                 alert.type === 'warning' ? 'warning' : 'info'}
                              </Icon>
                            </ListItemIcon>
                            <ListItemText
                              primary={alert.title}
                              secondary={
                                <Box>
                                  <Typography variant="body2" color="text.secondary">
                                    {alert.description}
                                  </Typography>
                                  <Typography variant="caption" color="text.secondary">
                                    {new Date(alert.timestamp).toLocaleString()}
                                  </Typography>
                                </Box>
                              }
                            />
                            <Chip
                              label={alert.status}
                              size="small"
                              color={alert.status === 'active' ? 'error' : 'success'}
                            />
                          </ListItem>
                        </Paper>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              </Grid>
            </Grid>
          </Container>
        </Box>
      );
    }

    // Create theme configuration
    const darkTheme = createTheme({
      palette: {
        mode: 'dark',
        primary: {
          main: '#2196f3',
        },
        secondary: {
          main: '#f50057',
        },
        background: {
          default: '#121212',
          paper: 'rgba(255, 255, 255, 0.05)',
        },
      },
      components: {
        MuiCard: {
          styleOverrides: {
            root: {
              backgroundColor: 'rgba(255, 255, 255, 0.05)',
              backdropFilter: 'blur(10px)',
              WebkitBackdropFilter: 'blur(10px)',
              borderRadius: 8,
              border: '1px solid rgba(255, 255, 255, 0.1)',
            },
          },
        },
        MuiAppBar: {
          styleOverrides: {
            root: {
              backgroundColor: 'rgba(0, 0, 0, 0.5)',
              backdropFilter: 'blur(10px)',
              WebkitBackdropFilter: 'blur(10px)',
            },
          },
        },
      },
    });

    // Render the app with ThemeProvider
    ReactDOM.render(
      <ThemeProvider theme={darkTheme}>
        <CssBaseline />
        <SecurityCenter />
      </ThemeProvider>,
      document.getElementById('root')
    );
  </script>
</body>
</html> 