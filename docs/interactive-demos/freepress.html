<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FreePress - Interactive Tutorial</title>
  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX transpiling -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Material-UI CDN -->
  <script src="https://unpkg.com/@mui/material@5.0.0/umd/material-ui.development.js" crossorigin></script>
  <!-- TinyMCE for rich text editing -->
  <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="../css/shared-demo.css" />
  <style>
    body { margin: 0; padding: 0; font-family: Roboto, sans-serif; background-color: #121212; color: #fff; }
    #root { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .tutorial-section { margin-bottom: 40px; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 20px; background-color: rgba(255,255,255,0.05); }
    .code-block { background-color: #1e1e1e; padding: 15px; border-radius: 4px; font-family: monospace; font-size: 14px; margin: 10px 0; overflow-x: auto; color: #e6e6e6; }
    .tab-content { padding: 15px 0; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { 
      Box, Typography, Button, Card, CardContent, Tabs, Tab, Grid, 
      Divider, TextField, Paper, IconButton, Tooltip, List, ListItem, 
      ListItemText, ListItemIcon, Chip, Alert, ToggleButton, ToggleButtonGroup,
      Dialog, DialogTitle, DialogContent, DialogActions
    } = MaterialUI;

    // Material icon names
    const ICONS = {
      EDIT: "edit",
      SAVE: "save",
      DELETE: "delete",
      ADD: "add",
      IMAGE: "image",
      LINK: "link",
      FORMAT_BOLD: "format_bold",
      FORMAT_ITALIC: "format_italic",
      FORMAT_LIST: "format_list_bulleted",
      FORMAT_QUOTE: "format_quote",
      COMMENT: "comment",
      SHARE: "share",
      INFO: "info"
    };

    // Sample article templates
    const articleTemplates = [
      {
        name: "News Article",
        description: "Standard news article format with headline, subheadline, and body",
        template: `<h1>Breaking News</h1>
<h2>Subheadline</h2>
<p class="lead">Lead paragraph introducing the story...</p>
<p>Main article content goes here...</p>
<div class="quote">"Important quote from a source"</div>
<p>More content...</p>`
      },
      {
        name: "Blog Post",
        description: "Casual blog post format with introduction and sections",
        template: `<h1>Blog Title</h1>
<p class="lead">Introduction to the topic...</p>
<h2>First Section</h2>
<p>Content for the first section...</p>
<h2>Second Section</h2>
<p>Content for the second section...</p>
<div class="conclusion">Summary and next steps...</div>`
      },
      {
        name: "Technical Article",
        description: "Technical article with code blocks and diagrams",
        template: `<h1>Technical Topic</h1>
<p class="lead">Overview of the technical concept...</p>
<h2>Background</h2>
<p>Technical background information...</p>
<pre><code>// Code example
function example() {
  // Implementation
}</code></pre>
<h2>Analysis</h2>
<p>Technical analysis and findings...</p>`
      }
    ];

    function FreePressTutorial() {
      const [tabValue, setTabValue] = React.useState(0);
      const [articleContent, setArticleContent] = React.useState("");
      const [selectedTemplate, setSelectedTemplate] = React.useState(null);
      const [comments, setComments] = React.useState([]);
      const [newComment, setNewComment] = React.useState("");
      const [isSaving, setIsSaving] = React.useState(false);
      const [error, setError] = React.useState(null);
      const [showImageDialog, setShowImageDialog] = React.useState(false);
      const [imageUrl, setImageUrl] = React.useState("");
      const [previewMode, setPreviewMode] = React.useState(false);
      const [selectedFormat, setSelectedFormat] = React.useState(null);

      const handleTabChange = (event, newValue) => {
        setTabValue(newValue);
        setError(null);
      };

      const handleTemplateSelect = (template) => {
        setSelectedTemplate(template);
        setArticleContent(template.template);
      };

      const handleContentChange = (content) => {
        setArticleContent(content);
        setError(null);
      };

      const handleSave = async () => {
        if (!articleContent) {
          setError("Please add some content to your article");
          return;
        }

        setIsSaving(true);
        // Simulate save operation
        await new Promise(resolve => setTimeout(resolve, 1500));
        setIsSaving(false);
      };

      const handleAddComment = () => {
        if (!newComment.trim()) return;
        
        setComments(prev => [...prev, {
          id: Date.now(),
          text: newComment,
          author: "User",
          timestamp: new Date().toLocaleString()
        }]);
        setNewComment("");
      };

      const handleFormatChange = (format) => {
        setSelectedFormat(format);
        let newContent = articleContent;
        
        switch (format) {
          case "bold":
            newContent = `<strong>${articleContent}</strong>`;
            break;
          case "italic":
            newContent = `<em>${articleContent}</em>`;
            break;
          case "list":
            newContent = `<ul><li>${articleContent}</li></ul>`;
            break;
          case "quote":
            newContent = `<blockquote>${articleContent}</blockquote>`;
            break;
          default:
            newContent = articleContent;
        }
        
        setArticleContent(newContent);
      };

      const handleImagePreview = () => {
        if (!imageUrl) return;
        
        const img = new Image();
        img.onload = () => {
          setShowImageDialog(false);
          const imageHtml = `<figure>
            <img src="${imageUrl}" alt="Uploaded image" style="max-width: 100%;" />
            <figcaption>Image caption</figcaption>
          </figure>`;
          setArticleContent(prev => prev + imageHtml);
          setImageUrl("");
        };
        img.src = imageUrl;
      };

      const renderPreview = () => {
        return (
          <div 
            className="article-preview"
            dangerouslySetInnerHTML={{ __html: articleContent }}
          />
        );
      };

      return (
        <Box>
          <Typography variant="h4" gutterBottom>
            FreePress - Interactive Tutorial
          </Typography>
          <Tabs value={tabValue} onChange={handleTabChange}>
            <Tab label="Overview" />
            <Tab label="Article Editor" />
            <Tab label="Comments" />
            <Tab label="Code Examples" />
          </Tabs>

          <Box className="tab-content">
            {tabValue === 0 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  What is FreePress?
                </Typography>
                <Typography paragraph>
                  FreePress is an intuitive content management and publishing tool designed for seamless news and article creation in the SafeAI ecosystem. 
                  It enables users to craft, edit, and publish high-quality content with real-time previews and interactive components.
                </Typography>

                <Grid container spacing={2}>
                  {['Interactive Article Editor', 'Real-time Preview', 'Multimedia Integration', 'Comment & Feedback System'].map((feature, index) => (
                    <Grid item xs={12} sm={6} md={3} key={index}>
                      <Card className="demo-section">
                        <CardContent>
                          <Typography variant="h6" color="primary">{feature}</Typography>
                        </CardContent>
                      </Card>
                    </Grid>
                  ))}
                </Grid>
              </Box>
            )}

            {tabValue === 1 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Article Editor
                </Typography>
                <Typography paragraph>
                  Create your article using the rich text editor below. Choose a template or start from scratch.
                </Typography>

                <Grid container spacing={2}>
                  <Grid item xs={12} md={4}>
                    <Paper className="demo-section">
                      <Typography variant="subtitle1" gutterBottom>
                        Article Templates
                      </Typography>
                      <List>
                        {articleTemplates.map((template, index) => (
                          <ListItem 
                            button 
                            key={index}
                            selected={selectedTemplate?.name === template.name}
                            onClick={() => handleTemplateSelect(template)}
                          >
                            <ListItemIcon>
                              <Icon>{ICONS.EDIT}</Icon>
                            </ListItemIcon>
                            <ListItemText 
                              primary={template.name}
                              secondary={template.description}
                            />
                          </ListItem>
                        ))}
                      </List>
                    </Paper>
                  </Grid>

                  <Grid item xs={12} md={8}>
                    <Paper className="demo-section">
                      <Box sx={{ mb: 2, display: 'flex', gap: 1, flexWrap: 'wrap' }}>
                        <ToggleButtonGroup 
                          size="small" 
                          value={selectedFormat}
                          onChange={(e, newFormat) => handleFormatChange(newFormat)}
                          exclusive
                        >
                          <ToggleButton value="bold">
                            <Icon>{ICONS.FORMAT_BOLD}</Icon>
                          </ToggleButton>
                          <ToggleButton value="italic">
                            <Icon>{ICONS.FORMAT_ITALIC}</Icon>
                          </ToggleButton>
                          <ToggleButton value="list">
                            <Icon>{ICONS.FORMAT_LIST}</Icon>
                          </ToggleButton>
                          <ToggleButton value="quote">
                            <Icon>{ICONS.FORMAT_QUOTE}</Icon>
                          </ToggleButton>
                        </ToggleButtonGroup>
                        <IconButton onClick={() => setShowImageDialog(true)}>
                          <Icon>{ICONS.IMAGE}</Icon>
                        </IconButton>
                        <IconButton>
                          <Icon>{ICONS.LINK}</Icon>
                        </IconButton>
                        <Button
                          variant="outlined"
                          onClick={() => setPreviewMode(!previewMode)}
                          startIcon={<Icon>{previewMode ? ICONS.EDIT : ICONS.INFO}</Icon>}
                        >
                          {previewMode ? "Edit" : "Preview"}
                        </Button>
                      </Box>

                      {previewMode ? (
                        <Box className="article-preview">
                          {renderPreview()}
                        </Box>
                      ) : (
                        <TextField
                          fullWidth
                          multiline
                          rows={10}
                          value={articleContent}
                          onChange={(e) => handleContentChange(e.target.value)}
                          placeholder="Write your article here..."
                          sx={{ mb: 2 }}
                        />
                      )}

                      <Box sx={{ display: 'flex', gap: 1 }}>
                        <Button
                          variant="contained"
                          onClick={handleSave}
                          disabled={isSaving}
                          startIcon={<Icon>{isSaving ? ICONS.SAVE : ICONS.SAVE}</Icon>}
                        >
                          {isSaving ? "Saving..." : "Save Article"}
                        </Button>
                      </Box>
                    </Paper>

                    {error && (
                      <Alert severity="error" sx={{ mt: 2 }}>
                        {error}
                      </Alert>
                    )}
                  </Grid>
                </Grid>
              </Box>
            )}

            {tabValue === 2 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Comments
                </Typography>
                <Typography paragraph>
                  Read and add comments to the article.
                </Typography>

                <Paper className="demo-section">
                  <Box sx={{ mb: 2 }}>
                    <TextField
                      fullWidth
                      multiline
                      rows={3}
                      value={newComment}
                      onChange={(e) => setNewComment(e.target.value)}
                      placeholder="Add a comment..."
                      sx={{ mb: 1 }}
                    />
                    <Button
                      variant="contained"
                      onClick={handleAddComment}
                      disabled={!newComment.trim()}
                      startIcon={<Icon>{ICONS.COMMENT}</Icon>}
                    >
                      Add Comment
                    </Button>
                  </Box>

                  <List>
                    {comments.map((comment) => (
                      <ListItem key={comment.id}>
                        <ListItemIcon>
                          <Icon>{ICONS.COMMENT}</Icon>
                        </ListItemIcon>
                        <ListItemText
                          primary={comment.text}
                          secondary={`${comment.author} - ${comment.timestamp}`}
                        />
                      </ListItem>
                    ))}
                  </List>
                </Paper>
              </Box>
            )}

            {tabValue === 3 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Code Examples
                </Typography>
                <Typography paragraph>
                  Here's an example of how to use the FreePress API:
                </Typography>

                <Paper className="demo-section">
                  <pre className="code-block">
{`// Example: Create a new article
const article = {
  title: "My Article",
  content: "<h1>Hello World</h1><p>This is my article...</p>",
  author: "John Doe",
  tags: ["news", "technology"]
};

const savedArticle = await freePress.createArticle(article);
console.log(savedArticle.id);  // Article ID

// Example: Add a comment
const comment = {
  articleId: savedArticle.id,
  text: "Great article!",
  author: "Jane Smith"
};

await freePress.addComment(comment);

// Example: Get article with comments
const articleWithComments = await freePress.getArticle(savedArticle.id);
console.log(articleWithComments.comments);  // Array of comments`}
                  </pre>
                </Paper>
              </Box>
            )}
          </Box>

          <Dialog open={showImageDialog} onClose={() => setShowImageDialog(false)}>
            <DialogTitle>Add Image</DialogTitle>
            <DialogContent>
              <TextField
                fullWidth
                label="Image URL"
                value={imageUrl}
                onChange={(e) => setImageUrl(e.target.value)}
                placeholder="https://example.com/image.jpg"
                sx={{ mt: 2 }}
              />
              {imageUrl && (
                <Box sx={{ mt: 2 }}>
                  <Typography variant="subtitle2" gutterBottom>
                    Preview:
                  </Typography>
                  <img 
                    src={imageUrl} 
                    alt="Preview" 
                    style={{ maxWidth: '100%', maxHeight: '200px', objectFit: 'contain' }} 
                  />
                </Box>
              )}
            </DialogContent>
            <DialogActions>
              <Button onClick={() => setShowImageDialog(false)}>Cancel</Button>
              <Button onClick={handleImagePreview} variant="contained">
                Add Image
              </Button>
            </DialogActions>
          </Dialog>
        </Box>
      );
    }

    ReactDOM.render(<FreePressTutorial />, document.getElementById('root'));
  </script>
</body>
</html> 