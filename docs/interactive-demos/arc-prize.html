<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ARC Prize Challenge - Interactive Tutorial</title>
  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX transpiling -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Material-UI CDN -->
  <script src="https://unpkg.com/@mui/material@5.0.0/umd/material-ui.development.js" crossorigin></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="../css/shared-demo.css" />
  <style>
    .tutorial-section {
      margin-bottom: 40px;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      padding: 20px;
      background-color: rgba(255,255,255,0.05);
    }
    
    .code-block {
      background-color: #1e1e1e;
      padding: 15px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 14px;
      margin: 10px 0;
      overflow-x: auto;
      color: #e6e6e6;
    }
    
    .color-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin: 10px 0;
    }
    
    .color-cell {
      width: 24px;
      height: 24px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 2px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .color-cell:hover {
      transform: scale(1.1);
    }
    
    .section-divider {
      height: 1px;
      background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.2), rgba(255,255,255,0));
      margin: 30px 0;
    }
    
    .tab-content {
      padding: 15px 0;
    }
    
    .url-display {
      background: rgba(0,0,0,0.2);
      padding: 12px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      word-break: break-all;
      margin: 10px 0;
      display: block;
    }

    .puzzle-grid {
      display: inline-block;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 4px;
      overflow: hidden;
      background-color: rgba(0,0,0,0.2);
    }

    .puzzle-row {
      display: flex;
    }

    .puzzle-cell {
      width: 24px;
      height: 24px;
      border: 1px solid rgba(0,0,0,0.2);
      transition: all 0.2s;
    }

    .puzzle-cell:hover {
      transform: scale(1.1);
      z-index: 1;
    }

    .log-entry {
      padding: 8px;
      border-radius: 4px;
      margin-bottom: 4px;
      font-family: monospace;
      font-size: 12px;
    }

    .log-entry.info {
      background-color: rgba(0,123,255,0.1);
      color: #7fdbff;
    }

    .log-entry.success {
      background-color: rgba(46,204,64,0.1);
      color: #2ecc40;
    }

    .log-entry.error {
      background-color: rgba(255,65,54,0.1);
      color: #ff4136;
    }

    .log-entry.warning {
      background-color: rgba(255,193,7,0.1);
      color: #ffdc00;
    }

    .log-timestamp {
      color: rgba(255,255,255,0.5);
      margin-right: 8px;
    }

    .log-level {
      font-weight: 500;
      margin-right: 8px;
    }

    .log-message {
      color: rgba(255,255,255,0.8);
    }

    .puzzle-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px 0;
    }

    .puzzle-section {
      text-align: center;
    }

    .puzzle-title {
      font-size: 14px;
      color: rgba(255,255,255,0.7);
      margin-bottom: 8px;
    }

    .puzzle-dimensions {
      font-size: 12px;
      color: rgba(255,255,255,0.5);
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { 
      Box, Typography, Button, TextField, Card, CardContent, 
      Tabs, Tab, CircularProgress, Grid, Divider, 
      Chip, Paper, IconButton, Tooltip, LinearProgress,
      alpha, Icon, useTheme, ThemeProvider, createTheme, CssBaseline,
      Alert, Snackbar
    } = MaterialUI;

    // Custom theme
    const darkTheme = createTheme({
      palette: {
        mode: 'dark',
        primary: {
          main: '#3f51b5',
        },
        secondary: {
          main: '#f50057',
        },
        background: {
          default: '#121212',
          paper: '#1e1e1e',
        },
      },
    });

    // Material icon names
    const ICONS = {
      PLAY_ARROW: "play_arrow",
      STOP: "stop",
      REFRESH: "refresh",
      INFO: "info",
      CONTENT_COPY: "content_copy",
      CHECK_CIRCLE: "check_circle",
      ERROR: "error",
      WARNING: "warning"
    };

    // Sample puzzle data
    const samplePuzzleData = {
      id: "demo_puzzle_001",
      input: [
        [0, 0, 0, 0, 0],
        [0, 1, 1, 1, 0],
        [0, 1, 0, 1, 0],
        [0, 1, 1, 1, 0],
        [0, 0, 0, 0, 0]
      ],
      output: [
        [0, 0, 0, 0, 0],
        [0, 2, 2, 2, 0],
        [0, 2, 0, 2, 0],
        [0, 2, 2, 2, 0],
        [0, 0, 0, 0, 0]
      ]
    };

    // Color map for ARC puzzles
    const colorMap = [
      '#000000', // 0: Black
      '#0074D9', // 1: Blue
      '#FF4136', // 2: Red
      '#2ECC40', // 3: Green
      '#FFDC00', // 4: Yellow
      '#B10DC9', // 5: Purple
      '#FF851B', // 6: Orange
      '#7FDBFF', // 7: Light Blue
      '#F012BE', // 8: Magenta
      '#39CCCC'  // 9: Cyan
    ];

    // Puzzle Grid Component
    function PuzzleGrid({ grid, title }) {
      if (!grid || !Array.isArray(grid) || grid.length === 0) {
        return (
          <Box className="puzzle-section">
            <Typography className="puzzle-title">
              {title} (No data)
            </Typography>
            <Box sx={{ 
              width: 120, 
              height: 120, 
              bgcolor: 'rgba(0,0,0,0.2)', 
              borderRadius: 1,
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center'
            }}>
              <Typography variant="caption" color="text.secondary">
                Empty Grid
              </Typography>
            </Box>
          </Box>
        );
      }
      
      return (
        <Box className="puzzle-section">
          <Typography className="puzzle-title">
            {title}
          </Typography>
          <Box className="puzzle-grid">
            {grid.map((row, rowIndex) => (
              <Box key={rowIndex} className="puzzle-row">
                {row.map((cell, cellIndex) => (
                  <Box 
                    key={cellIndex}
                    className="puzzle-cell"
                    sx={{
                      bgcolor: colorMap[cell] || '#333',
                    }}
                  />
                ))}
              </Box>
            ))}
          </Box>
          <Typography className="puzzle-dimensions">
            {grid[0].length}Ã—{grid.length}
          </Typography>
        </Box>
      );
    }

    // Log Entry Component
    function LogEntry({ entry }) {
      const getIcon = () => {
        switch (entry.level) {
          case 'success': return ICONS.CHECK_CIRCLE;
          case 'error': return ICONS.ERROR;
          case 'warning': return ICONS.WARNING;
          default: return ICONS.INFO;
        }
      };

      return (
        <Box className={`log-entry ${entry.level}`}>
          <span className="log-timestamp">
            {new Date(entry.timestamp).toLocaleTimeString()}
          </span>
          <span className="log-level">
            {entry.level.toUpperCase()}
          </span>
          <span className="log-message">
            {entry.message}
          </span>
        </Box>
      );
    }

    // Main ARC Tutorial Component
    function ARCTutorial() {
      const [tabValue, setTabValue] = React.useState(0);
      const [isProcessing, setIsProcessing] = React.useState(false);
      const [progress, setProgress] = React.useState(0);
      const [logs, setLogs] = React.useState([
        { level: 'info', message: 'System initialized', timestamp: Date.now() }
      ]);
      const [trainingUrl, setTrainingUrl] = React.useState('');
      const [evalUrl, setEvalUrl] = React.useState('');
      const [finalUrl, setFinalUrl] = React.useState('');
      const [prediction, setPrediction] = React.useState(null);
      const [snackbar, setSnackbar] = React.useState({ open: false, message: '', severity: 'info' });

      const handleTabChange = (event, newValue) => {
        setTabValue(newValue);
      };

      const addLog = (level, message) => {
        setLogs(prev => [...prev, { level, message, timestamp: Date.now() }]);
      };

      const showSnackbar = (message, severity = 'info') => {
        setSnackbar({ open: true, message, severity });
      };

      const handleCloseSnackbar = () => {
        setSnackbar(prev => ({ ...prev, open: false }));
      };

      const handleTrainingUrlChange = (event) => {
        const url = event.target.value;
        setTrainingUrl(url);
        addLog('info', `Training URL set to: ${url}`);
        updateFinalUrl(url, evalUrl);
      };

      const handleEvalUrlChange = (event) => {
        const url = event.target.value;
        setEvalUrl(url);
        addLog('info', `Evaluation URL set to: ${url}`);
        updateFinalUrl(trainingUrl, url);
      };

      const updateFinalUrl = (training, eval) => {
        if (training && eval) {
          const finalUrl = `${window.location.origin}/arc-challenge?training=${encodeURIComponent(training)}&evaluation=${encodeURIComponent(eval)}`;
          setFinalUrl(finalUrl);
          addLog('info', `Final URL generated: ${finalUrl}`);
        } else {
          setFinalUrl('');
        }
      };

      const copyFinalUrl = async () => {
        if (finalUrl) {
          try {
            await navigator.clipboard.writeText(finalUrl);
            showSnackbar('URL copied to clipboard', 'success');
          } catch (err) {
            showSnackbar('Failed to copy URL', 'error');
          }
        }
      };

      const handleProcessPuzzle = async () => {
        setIsProcessing(true);
        setProgress(0);
        addLog('info', 'Starting puzzle processing...');

        // Simulate processing steps
        const steps = [
          { progress: 20, message: 'Loading puzzle data...' },
          { progress: 40, message: 'Analyzing input pattern...' },
          { progress: 60, message: 'Generating prediction...' },
          { progress: 80, message: 'Validating result...' },
          { progress: 100, message: 'Processing complete' }
        ];

        for (const step of steps) {
          await new Promise(resolve => setTimeout(resolve, 1000));
          setProgress(step.progress);
          addLog('info', step.message);
        }

        // Set prediction
        setPrediction(samplePuzzleData.output);
        addLog('success', 'Puzzle processed successfully');
        setIsProcessing(false);
      };

      return (
        <Box sx={{ p: 3 }}>
          <Typography variant="h4" gutterBottom>
            ARC Prize Challenge - Interactive Tutorial
          </Typography>

          <Tabs value={tabValue} onChange={handleTabChange}>
            <Tab label="Overview" />
            <Tab label="Puzzle Solver" />
            <Tab label="Submission" />
            <Tab label="Code Examples" />
          </Tabs>

          <Box className="tab-content">
            {tabValue === 0 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  What is the ARC Prize Challenge?
                </Typography>
                <Typography paragraph>
                  The Abstraction and Reasoning Corpus (ARC) Prize Challenge is a unique AI competition 
                  focused on developing systems that can solve visual reasoning tasks with minimal training data. 
                  This interactive tutorial will help you understand and participate in the challenge.
                </Typography>

                <Grid container spacing={2}>
                  {[
                    'Visual Pattern Recognition',
                    'Few-shot Learning',
                    'Abstract Reasoning',
                    'General AI Progress'
                  ].map((feature, index) => (
                    <Grid item xs={12} sm={6} md={3} key={index}>
                      <Card className="demo-section">
                        <CardContent>
                          <Typography variant="h6" color="primary">{feature}</Typography>
                        </CardContent>
                      </Card>
                    </Grid>
                  ))}
                </Grid>
              </Box>
            )}

            {tabValue === 1 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Puzzle Solver
                </Typography>
                <Typography paragraph>
                  Try solving a sample ARC puzzle using our interactive solver.
                </Typography>

                <Box className="puzzle-container">
                  <PuzzleGrid grid={samplePuzzleData.input} title="Input" />
                  <PuzzleGrid grid={samplePuzzleData.output} title="Expected Output" />
                  {prediction && <PuzzleGrid grid={prediction} title="AI Prediction" />}
                </Box>

                <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>
                  <Button
                    variant="contained"
                    onClick={handleProcessPuzzle}
                    disabled={isProcessing}
                    startIcon={<Icon>{ICONS.PLAY_ARROW}</Icon>}
                  >
                    Process Puzzle
                  </Button>
                </Box>

                {isProcessing && (
                  <Box sx={{ mt: 2 }}>
                    <LinearProgress variant="determinate" value={progress} />
                    <Typography variant="body2" color="text.secondary" align="right">
                      {progress}%
                    </Typography>
                  </Box>
                )}

                <Box sx={{ mt: 2 }}>
                  <Typography variant="subtitle1" gutterBottom>
                    Processing Log
                  </Typography>
                  <Paper sx={{ p: 2, maxHeight: 200, overflow: 'auto' }}>
                    {logs.map((log, index) => (
                      <LogEntry key={index} entry={log} />
                    ))}
                  </Paper>
                </Box>
              </Box>
            )}

            {tabValue === 2 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Submission
                </Typography>
                <Typography paragraph>
                  Prepare your submission by providing the training and evaluation data URLs.
                </Typography>

                <Paper className="demo-section">
                  <Grid container spacing={2}>
                    <Grid item xs={12}>
                      <TextField
                        fullWidth
                        label="Training Data URL"
                        value={trainingUrl}
                        onChange={handleTrainingUrlChange}
                        placeholder="https://github.com/fchollet/ARC/training"
                        variant="outlined"
                      />
                    </Grid>
                    <Grid item xs={12}>
                      <TextField
                        fullWidth
                        label="Evaluation Data URL"
                        value={evalUrl}
                        onChange={handleEvalUrlChange}
                        placeholder="https://github.com/fchollet/ARC/evaluation"
                        variant="outlined"
                      />
                    </Grid>
                    {finalUrl && (
                      <Grid item xs={12}>
                        <Typography variant="subtitle1" gutterBottom>
                          Generated Submission URL
                        </Typography>
                        <Box className="url-display">
                          {finalUrl}
                        </Box>
                        <Button
                          startIcon={<Icon>{ICONS.CONTENT_COPY}</Icon>}
                          onClick={copyFinalUrl}
                        >
                          Copy URL
                        </Button>
                      </Grid>
                    )}
                  </Grid>
                </Paper>
              </Box>
            )}

            {tabValue === 3 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Code Examples
                </Typography>
                <Typography paragraph>
                  Example code snippets demonstrating how to work with ARC puzzles.
                </Typography>

                <Paper className="demo-section">
                  <Typography variant="subtitle1" gutterBottom>
                    Loading Puzzle Data
                  </Typography>
                  <Box className="code-block">
                    {`// Example: Load and process an ARC puzzle
const puzzle = {
  id: "puzzle_001",
  input: [
    [0, 0, 0],
    [0, 1, 0],
    [0, 0, 0]
  ],
  output: [
    [0, 0, 0],
    [0, 2, 0],
    [0, 0, 0]
  ]
};

const result = await arcSolver.processPuzzle(puzzle);
console.log(result.prediction);`}
                  </Box>

                  <Typography variant="subtitle1" gutterBottom sx={{ mt: 3 }}>
                    Training Data Processing
                  </Typography>
                  <Box className="code-block">
                    {`// Example: Process training data
const trainingData = await arcSolver.loadTrainingData(trainingUrl);
const model = await arcSolver.train(trainingData);
const predictions = await model.predict(evaluationData);`}
                  </Box>
                </Paper>
              </Box>
            )}
          </Box>

          <Snackbar
            open={snackbar.open}
            autoHideDuration={6000}
            onClose={handleCloseSnackbar}
            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}
          >
            <Alert 
              onClose={handleCloseSnackbar} 
              severity={snackbar.severity}
              sx={{ width: '100%' }}
            >
              {snackbar.message}
            </Alert>
          </Snackbar>
        </Box>
      );
    }

    // Render the application with theme provider
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(
      <ThemeProvider theme={darkTheme}>
        <CssBaseline />
        <ARCTutorial />
      </ThemeProvider>
    );
  </script>
</body>
</html> 