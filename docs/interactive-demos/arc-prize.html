<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ARC Prize Challenge - SafeAI Interactive Demos</title>
  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX transpiling -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Material-UI CDN -->
  <script src="https://unpkg.com/@mui/material@5.15.11/umd/material-ui.development.js" crossorigin></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="../css/shared-demo.css" />
  <style>
    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .challenge-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 20px 0;
    }
    
    .color-grid {
      display: grid;
      grid-template-columns: repeat(10, 24px);
      gap: 2px;
      margin: 10px 0;
    }
    
    .color-cell {
      width: 24px;
      height: 24px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .color-cell:hover {
      transform: scale(1.1);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    }
    
    .color-cell.selected {
      border: 2px solid #2196f3;
    }
    
    .grid-editor {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }
    
    .grid-preview {
      display: grid;
      gap: 2px;
      margin: 20px 0;
      background-color: rgba(0, 0, 0, 0.2);
      padding: 10px;
      border-radius: 4px;
    }
    
    .solution-panel {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
    }
    
    .metrics-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .metric-card {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }
    
    .challenge-card {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 20px;
      transition: all 0.3s ease;
    }
    
    .challenge-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { 
      Box, Typography, Container, Card, CardContent, Grid, AppBar, Toolbar,
      IconButton, Icon, Button, TextField, Select, MenuItem, FormControl,
      InputLabel, Chip, Stack, Divider, Alert, Paper, Tabs, Tab, Tooltip,
      LinearProgress
    } = MaterialUI;

    // Sample ARC challenges
    const challenges = [
      {
        id: 1,
        name: "Pattern Completion",
        difficulty: "Easy",
        description: "Complete the pattern by identifying the missing elements",
        input: [
          [0, 1, 0],
          [1, 0, 1],
          [0, 1, 0]
        ],
        output: [
          [1, 0, 1],
          [0, 1, 0],
          [1, 0, 1]
        ]
      },
      {
        id: 2,
        name: "Shape Transformation",
        difficulty: "Medium",
        description: "Transform the input shape according to the pattern",
        input: [
          [1, 1, 1],
          [1, 0, 1],
          [1, 1, 1]
        ],
        output: [
          [0, 1, 0],
          [1, 0, 1],
          [0, 1, 0]
        ]
      },
      {
        id: 3,
        name: "Symmetry Detection",
        difficulty: "Hard",
        description: "Identify and complete symmetrical patterns",
        input: [
          [1, 0, 1],
          [0, 1, 0],
          [1, 0, 0]
        ],
        output: [
          [1, 0, 1],
          [0, 1, 0],
          [1, 0, 1]
        ]
      }
    ];

    // Color palette for the grid
    const colors = [
      "#000000", "#ffffff", "#2196f3", "#4caf50", "#f44336",
      "#ff9800", "#9c27b0", "#00bcd4", "#ffeb3b", "#795548"
    ];

    function ARCPrizeChallenge() {
      const [selectedChallenge, setSelectedChallenge] = React.useState(null);
      const [selectedColor, setSelectedColor] = React.useState(colors[0]);
      const [userSolution, setUserSolution] = React.useState(null);
      const [feedback, setFeedback] = React.useState(null);
      const [tabValue, setTabValue] = React.useState(0);
      const [metrics, setMetrics] = React.useState({
        completed: 0,
        accuracy: 0,
        streak: 0
      });

      const handleChallengeSelect = (challenge) => {
        setSelectedChallenge(challenge);
        setUserSolution(JSON.parse(JSON.stringify(challenge.input)));
        setFeedback(null);
      };

      const handleColorSelect = (color) => {
        setSelectedColor(color);
      };

      const handleCellClick = (row, col) => {
        if (!userSolution) return;
        
        const newSolution = JSON.parse(JSON.stringify(userSolution));
        newSolution[row][col] = colors.indexOf(selectedColor);
        setUserSolution(newSolution);
      };

      const handleSubmit = () => {
        if (!selectedChallenge || !userSolution) return;
        
        const isCorrect = JSON.stringify(userSolution) === JSON.stringify(selectedChallenge.output);
        setFeedback({
          type: isCorrect ? "success" : "error",
          message: isCorrect ? "Correct! Well done!" : "Not quite right. Try again!"
        });
        
        if (isCorrect) {
          setMetrics(prev => ({
            completed: prev.completed + 1,
            accuracy: Math.round((prev.completed + 1) / (prev.completed + 2) * 100),
            streak: prev.streak + 1
          }));
        } else {
          setMetrics(prev => ({
            ...prev,
            streak: 0
          }));
        }
      };

      const handleTabChange = (event, newValue) => {
        setTabValue(newValue);
      };

      const renderGrid = (grid) => {
        if (!grid) return null;
        
        return (
          <div 
            className="grid-preview" 
            style={{ 
              gridTemplateColumns: `repeat(${grid[0].length}, 24px)` 
            }}
          >
            {grid.map((row, i) => 
              row.map((cell, j) => (
                <div
                  key={`${i}-${j}`}
                  className="color-cell"
                  style={{ backgroundColor: colors[cell] }}
                  onClick={() => handleCellClick(i, j)}
                />
              ))
            )}
          </div>
        );
      };

      return (
        <Box>
          <AppBar position="static" sx={{ backgroundColor: "rgba(0,0,0,0.5)" }}>
            <Toolbar>
              <IconButton
                size="large"
                edge="start"
                color="inherit"
                aria-label="menu"
                sx={{ mr: 2 }}
              >
                <Icon>psychology</Icon>
              </IconButton>
              <Typography variant="h6" component="div" sx={{ flexGrow: 1 }}>
                ARC Prize Challenge
              </Typography>
              <Button color="inherit" href="index.html">
                Back to Demos
              </Button>
            </Toolbar>
          </AppBar>
          
          <Container maxWidth="lg" sx={{ mt: 4 }}>
            <Box sx={{ mb: 4 }}>
              <Typography variant="h4" gutterBottom>
                Abstract Reasoning Corpus Challenge
              </Typography>
              <Typography variant="body1" color="text.secondary">
                Test AI agents against a diverse set of abstract reasoning tasks. Each challenge requires understanding patterns,
                transformations, and logical relationships between grid-based visual elements.
              </Typography>
            </Box>

            <div className="metrics-panel">
              <Paper className="metric-card">
                <Typography variant="h4" color="primary">
                  {metrics.completed}
                </Typography>
                <Typography variant="body2" color="text.secondary">
                  Challenges Completed
                </Typography>
              </Paper>
              <Paper className="metric-card">
                <Typography variant="h4" color="primary">
                  {metrics.accuracy}%
                </Typography>
                <Typography variant="body2" color="text.secondary">
                  Accuracy Rate
                </Typography>
              </Paper>
              <Paper className="metric-card">
                <Typography variant="h4" color="primary">
                  {metrics.streak}
                </Typography>
                <Typography variant="body2" color="text.secondary">
                  Current Streak
                </Typography>
              </Paper>
            </div>

            <Grid container spacing={3}>
              <Grid item xs={12} md={4}>
                <Paper sx={{ p: 2 }}>
                  <Typography variant="h6" gutterBottom>
                    Available Challenges
                  </Typography>
                  <Stack spacing={2}>
                    {challenges.map(challenge => (
                      <Card 
                        key={challenge.id}
                        className="challenge-card"
                        onClick={() => handleChallengeSelect(challenge)}
                        sx={{ cursor: 'pointer' }}
                      >
                        <CardContent>
                          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>
                            <Typography variant="subtitle1">
                              {challenge.name}
                            </Typography>
                            <Chip 
                              label={challenge.difficulty}
                              color={
                                challenge.difficulty === "Easy" ? "success" :
                                challenge.difficulty === "Medium" ? "warning" : "error"
                              }
                              size="small"
                            />
                          </Box>
                          <Typography variant="body2" color="text.secondary">
                            {challenge.description}
                          </Typography>
                        </CardContent>
                      </Card>
                    ))}
                  </Stack>
                </Paper>
              </Grid>
              
              <Grid item xs={12} md={8}>
                {selectedChallenge ? (
                  <Paper sx={{ p: 2 }}>
                    <Typography variant="h6" gutterBottom>
                      {selectedChallenge.name}
                    </Typography>
                    
                    <Tabs value={tabValue} onChange={handleTabChange} sx={{ mb: 2 }}>
                      <Tab label="Challenge" />
                      <Tab label="Solution" />
                      <Tab label="Analysis" />
                    </Tabs>
                    
                    {tabValue === 0 && (
                      <div className="grid-editor">
                        <Typography variant="subtitle1" gutterBottom>
                          Input Pattern
                        </Typography>
                        {renderGrid(selectedChallenge.input)}
                        
                        <Typography variant="subtitle1" gutterBottom sx={{ mt: 3 }}>
                          Your Solution
                        </Typography>
                        <div className="color-grid">
                          {colors.map((color, index) => (
                            <Tooltip key={color} title={`Color ${index}`}>
                              <div
                                className={`color-cell ${selectedColor === color ? 'selected' : ''}`}
                                style={{ backgroundColor: color }}
                                onClick={() => handleColorSelect(color)}
                              />
                            </Tooltip>
                          ))}
                        </div>
                        {renderGrid(userSolution)}
                        
                        <Button
                          variant="contained"
                          onClick={handleSubmit}
                          sx={{ mt: 2 }}
                        >
                          Submit Solution
                        </Button>
                        
                        {feedback && (
                          <Alert 
                            severity={feedback.type} 
                            sx={{ mt: 2 }}
                          >
                            {feedback.message}
                          </Alert>
                        )}
                      </div>
                    )}
                    
                    {tabValue === 1 && (
                      <div className="solution-panel">
                        <Typography variant="subtitle1" gutterBottom>
                          Expected Output
                        </Typography>
                        {renderGrid(selectedChallenge.output)}
                        
                        <Typography variant="body2" color="text.secondary" sx={{ mt: 2 }}>
                          Study the transformation from input to output to understand the pattern.
                        </Typography>
                      </div>
                    )}
                    
                    {tabValue === 2 && (
                      <div className="solution-panel">
                        <Typography variant="subtitle1" gutterBottom>
                          Pattern Analysis
                        </Typography>
                        <Typography variant="body2" paragraph>
                          This challenge tests understanding of:
                        </Typography>
                        <ul>
                          <li>Pattern recognition</li>
                          <li>Spatial relationships</li>
                          <li>Logical transformations</li>
                          <li>Symmetry and balance</li>
                        </ul>
                      </div>
                    )}
                  </Paper>
                ) : (
                  <Paper sx={{ p: 4, textAlign: 'center' }}>
                    <Typography variant="h6" color="text.secondary">
                      Select a challenge to begin
                    </Typography>
                  </Paper>
                )}
              </Grid>
            </Grid>
          </Container>
        </Box>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<ARCPrizeChallenge />);
  </script>
</body>
</html> 