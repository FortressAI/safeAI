<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Math ATP - SafeAI Interactive Demos</title>
  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX transpiling -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Material-UI CDN -->
  <script src="https://unpkg.com/@mui/material@5.15.11/umd/material-ui.development.js" crossorigin></script>
  <!-- KaTeX for math rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="../css/shared-demo.css" />
  <style>
    .tutorial-section {
      margin-bottom: 40px;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      padding: 20px;
      background-color: rgba(255,255,255,0.05);
    }
    
    .code-block {
      background-color: #1e1e1e;
      padding: 15px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 14px;
      margin: 10px 0;
      overflow-x: auto;
      color: #e6e6e6;
    }
    
    .tab-content {
      padding: 15px 0;
    }
    
    .proof-step {
      padding: 10px;
      margin: 5px 0;
      border-radius: 4px;
      background-color: rgba(255,255,255,0.05);
    }
    
    .proof-step.processing {
      border-left: 4px solid #FFC107;
    }
    
    .proof-step.success {
      border-left: 4px solid #4CAF50;
    }
    
    .proof-step.error {
      border-left: 4px solid #F44336;
    }
    
    .math-display {
      text-align: center;
      margin: 20px 0;
      padding: 20px;
      background-color: rgba(0,0,0,0.2);
      border-radius: 8px;
    }
    
    .solution-step {
      padding: 10px;
      margin: 5px 0;
      border-radius: 4px;
      background-color: rgba(255,255,255,0.05);
    }
    
    .solution-step.given {
      border-left: 4px solid #2196F3;
    }
    
    .solution-step.algebra {
      border-left: 4px solid #4CAF50;
    }
    
    .solution-step.solution {
      border-left: 4px solid #F44336;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { 
      Box, Typography, Button, Card, CardContent, Tabs, Tab, Grid, 
      Divider, LinearProgress, TextField, Paper, IconButton, Tooltip,
      List, ListItem, ListItemText, ListItemIcon, Chip, Alert,
      useTheme, ThemeProvider, createTheme, CssBaseline
    } = MaterialUI;

    // Custom theme
    const darkTheme = createTheme({
      palette: {
        mode: 'dark',
        primary: {
          main: '#3f51b5',
        },
        secondary: {
          main: '#f50057',
        },
        background: {
          default: '#121212',
          paper: '#1e1e1e',
        },
      },
    });

    // Material icon names
    const ICONS = {
      CHECK: "check_circle",
      ERROR: "error",
      WARNING: "warning",
      INFO: "info",
      REFRESH: "refresh",
      SAVE: "save"
    };

    // Sample theorems and equations
    const sampleTheorems = [
      {
        name: "Pythagorean Theorem",
        statement: "a^2 + b^2 = c^2",
        description: "In a right triangle, the square of the hypotenuse equals the sum of squares of other sides",
        proof: [
          { step: "Consider a right triangle with sides a, b, and hypotenuse c", type: "given" },
          { step: "Draw squares on each side", type: "construction" },
          { step: "Area of square on hypotenuse = c²", type: "calculation" },
          { step: "Area of squares on other sides = a² + b²", type: "calculation" },
          { step: "By geometric proof, c² = a² + b²", type: "conclusion" }
        ]
      },
      {
        name: "Quadratic Formula",
        statement: "x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}",
        description: "Solution to the quadratic equation ax² + bx + c = 0",
        proof: [
          { step: "Start with ax² + bx + c = 0", type: "given" },
          { step: "Divide by a: x² + (b/a)x + c/a = 0", type: "algebra" },
          { step: "Complete the square", type: "algebra" },
          { step: "Solve for x", type: "algebra" },
          { step: "x = (-b ± √(b²-4ac))/(2a)", type: "conclusion" }
        ]
      }
    ];

    // Theorem Card Component
    function TheoremCard({ theorem, selected, onSelect }) {
      return (
        <Card 
          className="demo-section"
          sx={{ 
            cursor: 'pointer',
            bgcolor: selected ? 'primary.dark' : 'background.paper',
            '&:hover': { bgcolor: 'primary.dark' }
          }}
          onClick={() => onSelect(theorem)}
        >
          <CardContent>
            <Typography variant="h6" gutterBottom>
              {theorem.name}
            </Typography>
            <Typography variant="body2" color="text.secondary" paragraph>
              {theorem.description}
            </Typography>
            <Box className="math-display" dangerouslySetInnerHTML={{ __html: renderMath(theorem.statement) }} />
          </CardContent>
        </Card>
      );
    }

    // Proof Step Component
    function ProofStep({ step, status }) {
      return (
        <Box className={`proof-step ${status}`}>
          <Typography variant="body2">
            {step.step}
          </Typography>
          <Typography variant="caption" color="text.secondary">
            {step.type}
          </Typography>
        </Box>
      );
    }

    // Solution Step Component
    function SolutionStep({ step }) {
      return (
        <Box className={`solution-step ${step.type}`}>
          <Typography variant="body2">
            {step.step}
          </Typography>
          <Typography variant="caption" color="text.secondary">
            {step.type}
          </Typography>
        </Box>
      );
    }

    // Main MathATP Component
    function MathATPTutorial() {
      const [tabValue, setTabValue] = React.useState(0);
      const [selectedTheorem, setSelectedTheorem] = React.useState(null);
      const [equation, setEquation] = React.useState("");
      const [proofSteps, setProofSteps] = React.useState([]);
      const [isProcessing, setIsProcessing] = React.useState(false);
      const [error, setError] = React.useState(null);
      const [progress, setProgress] = React.useState(0);
      const [equationToSolve, setEquationToSolve] = React.useState("");
      const [solution, setSolution] = React.useState(null);

      const handleTabChange = (event, newValue) => {
        setTabValue(newValue);
        setError(null);
      };

      const handleTheoremSelect = (theorem) => {
        setSelectedTheorem(theorem);
        setEquation(theorem.statement);
        setProofSteps([]);
        setProgress(0);
      };

      const handleEquationChange = (event) => {
        setEquation(event.target.value);
        setError(null);
      };

      const generateProof = async () => {
        if (!equation) {
          setError("Please enter a mathematical statement");
          return;
        }

        setIsProcessing(true);
        setProgress(0);
        setProofSteps([]);

        // Simulate proof generation
        const steps = [
          "Validating mathematical statement...",
          "Applying relevant theorems...",
          "Constructing proof sequence...",
          "Verifying each step...",
          "Generating final proof..."
        ];

        for (let i = 0; i < steps.length; i++) {
          setProofSteps(prev => [...prev, { step: steps[i], status: "processing" }]);
          await new Promise(resolve => setTimeout(resolve, 1000));
          setProgress((i + 1) * 20);
        }

        // Final proof steps
        setProofSteps(prev => [
          ...prev,
          { step: "Statement is valid", status: "success" },
          { step: "Proof is complete", status: "success" }
        ]);

        setIsProcessing(false);
        setProgress(100);
      };

      const solveEquation = async () => {
        if (!equationToSolve) {
          setError("Please enter an equation to solve");
          return;
        }

        setIsProcessing(true);
        setProgress(0);
        setSolution(null);

        // Simulate equation solving steps
        const steps = [
          "Parsing equation...",
          "Identifying variables and constants...",
          "Applying algebraic rules...",
          "Solving for unknown...",
          "Verifying solution..."
        ];

        for (let i = 0; i < steps.length; i++) {
          setProofSteps(prev => [...prev, { step: steps[i], status: "processing" }]);
          await new Promise(resolve => setTimeout(resolve, 1000));
          setProgress((i + 1) * 20);
        }

        // Example solution
        setSolution({
          steps: [
            { step: "Original equation: " + equationToSolve, type: "given" },
            { step: "Isolate variable terms", type: "algebra" },
            { step: "Combine like terms", type: "algebra" },
            { step: "Solve for variable", type: "algebra" },
            { step: "x = 4", type: "solution" }
          ]
        });

        setIsProcessing(false);
        setProgress(100);
      };

      const handleEquationToSolveChange = (event) => {
        setEquationToSolve(event.target.value);
        setError(null);
      };

      const renderMath = (math) => {
        try {
          return katex.renderToString(math, { displayMode: true });
        } catch (err) {
          return math;
        }
      };

      return (
        <Box sx={{ p: 3 }}>
          <Typography variant="h4" gutterBottom>
            MathATP - Interactive Tutorial
          </Typography>

          {error && (
            <Alert severity="error" sx={{ mb: 2 }}>
              {error}
            </Alert>
          )}

          <Tabs value={tabValue} onChange={handleTabChange}>
            <Tab label="Overview" />
            <Tab label="Theorem Proving" />
            <Tab label="Equation Solving" />
            <Tab label="Code Examples" />
          </Tabs>

          <Box className="tab-content">
            {tabValue === 0 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  What is MathATP?
                </Typography>
                <Typography paragraph>
                  MathATP is a cutting-edge system for automated theorem proving and advanced mathematical problem-solving. 
                  It assists in generating proofs, solving equations, and verifying complex mathematical statements using state-of-the-art algorithms.
                </Typography>

                <Grid container spacing={2}>
                  {['Automated Theorem Proving', 'Complex Equation Solving', 'Interactive Proof Generation', 'Real-time Validation'].map((feature, index) => (
                    <Grid item xs={12} sm={6} md={3} key={index}>
                      <Card className="demo-section">
                        <CardContent>
                          <Typography variant="h6" color="primary">{feature}</Typography>
                        </CardContent>
                      </Card>
                    </Grid>
                  ))}
                </Grid>
              </Box>
            )}

            {tabValue === 1 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Theorem Proving
                </Typography>
                <Typography paragraph>
                  Select a theorem or enter your own mathematical statement to generate a proof.
                </Typography>

                <Grid container spacing={2}>
                  <Grid item xs={12} md={4}>
                    <Paper className="demo-section">
                      <Typography variant="subtitle1" gutterBottom>
                        Sample Theorems
                      </Typography>
                      <List>
                        {sampleTheorems.map((theorem, index) => (
                          <ListItem 
                            button 
                            key={index}
                            selected={selectedTheorem?.name === theorem.name}
                            onClick={() => handleTheoremSelect(theorem)}
                          >
                            <ListItemText
                              primary={theorem.name}
                              secondary={theorem.description}
                            />
                          </ListItem>
                        ))}
                      </List>
                    </Paper>
                  </Grid>

                  <Grid item xs={12} md={8}>
                    <Paper className="demo-section">
                      <Typography variant="subtitle1" gutterBottom>
                        Enter Mathematical Statement
                      </Typography>
                      <TextField
                        fullWidth
                        multiline
                        rows={3}
                        value={equation}
                        onChange={handleEquationChange}
                        placeholder="Enter a mathematical statement..."
                        variant="outlined"
                        sx={{ mb: 2 }}
                      />
                      <Button
                        variant="contained"
                        onClick={generateProof}
                        disabled={isProcessing}
                        startIcon={<Icon>{ICONS.REFRESH}</Icon>}
                      >
                        Generate Proof
                      </Button>

                      {isProcessing && (
                        <Box sx={{ mt: 2 }}>
                          <LinearProgress variant="determinate" value={progress} />
                          <Typography variant="body2" color="text.secondary" align="right">
                            {progress}%
                          </Typography>
                        </Box>
                      )}

                      {proofSteps.length > 0 && (
                        <Box sx={{ mt: 2 }}>
                          <Typography variant="subtitle1" gutterBottom>
                            Proof Steps
                          </Typography>
                          {proofSteps.map((step, index) => (
                            <ProofStep key={index} step={step} status={step.status} />
                          ))}
                        </Box>
                      )}
                    </Paper>
                  </Grid>
                </Grid>
              </Box>
            )}

            {tabValue === 2 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Equation Solving
                </Typography>
                <Typography paragraph>
                  Enter an equation to solve step by step.
                </Typography>

                <Paper className="demo-section">
                  <TextField
                    fullWidth
                    value={equationToSolve}
                    onChange={handleEquationToSolveChange}
                    placeholder="Enter an equation (e.g., 2x + 5 = 13)"
                    variant="outlined"
                    sx={{ mb: 2 }}
                  />
                  <Button
                    variant="contained"
                    onClick={solveEquation}
                    disabled={isProcessing}
                    startIcon={<Icon>{ICONS.REFRESH}</Icon>}
                  >
                    Solve Equation
                  </Button>

                  {isProcessing && (
                    <Box sx={{ mt: 2 }}>
                      <LinearProgress variant="determinate" value={progress} />
                      <Typography variant="body2" color="text.secondary" align="right">
                        {progress}%
                      </Typography>
                    </Box>
                  )}

                  {solution && (
                    <Box sx={{ mt: 2 }}>
                      <Typography variant="subtitle1" gutterBottom>
                        Solution Steps
                      </Typography>
                      {solution.steps.map((step, index) => (
                        <SolutionStep key={index} step={step} />
                      ))}
                    </Box>
                  )}
                </Paper>
              </Box>
            )}

            {tabValue === 3 && (
              <Box>
                <Typography variant="h6" gutterBottom>
                  Code Examples
                </Typography>
                <Typography paragraph>
                  Example code snippets demonstrating how to use MathATP in your applications.
                </Typography>

                <Paper className="demo-section">
                  <Typography variant="subtitle1" gutterBottom>
                    Theorem Proving
                  </Typography>
                  <Box className="code-block">
                    {`// Example: Prove a mathematical statement
const theorem = {
  statement: "a^2 + b^2 = c^2",
  conditions: ["a, b, c are sides of a right triangle"]
};

const proof = await mathATP.prove(theorem);
console.log(proof.steps);`}
                  </Box>

                  <Typography variant="subtitle1" gutterBottom sx={{ mt: 3 }}>
                    Equation Solving
                  </Typography>
                  <Box className="code-block">
                    {`// Example: Solve a quadratic equation
const equation = "2x^2 + 5x - 3 = 0";
const solution = await mathATP.solve(equation);
console.log(solution.steps);`}
                  </Box>
                </Paper>
              </Box>
            )}
          </Box>
        </Box>
      );
    }

    // Render the application with theme provider
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(
      <ThemeProvider theme={darkTheme}>
        <CssBaseline />
        <MathATPTutorial />
      </ThemeProvider>
    );
  </script>
</body>
</html> 